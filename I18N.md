# BookSolo Landing Page - Internationalization (i18n)

This landing page supports English and Polish languages using Next.js App Router with locale-based routing.

## Architecture

### URL Structure
- English: `https://booksolo.eu/en/`
- Polish: `https://booksolo.eu/pl/`
- Root redirect: `https://booksolo.eu/` → redirects to `/en` (default)

### File Structure
```
src/
├── i18n/
│   ├── config.ts           # Locale configuration (en, pl)
│   ├── get-dictionary.ts   # Dictionary loader
│   └── locales/
│       ├── en.ts           # English translations
│       └── pl.ts           # Polish translations
├── app/
│   ├── layout.tsx          # Root layout (minimal)
│   ├── page.tsx            # Root page (redirects to default locale)
│   └── [locale]/
│       ├── layout.tsx      # Locale-specific layout with Header/Footer
│       ├── page.tsx        # Home page
│       └── polityka-prywatnosci/
│           └── page.tsx    # Privacy policy page
└── middleware.ts           # Redirects to default locale
```

## How It Works

### 1. Locale Detection & Routing
- **Middleware** (`src/middleware.ts`): Intercepts requests and redirects root path to default locale
- **Dynamic Segment** (`[locale]`): Next.js dynamic route handles `/en` and `/pl` paths
- **Static Generation**: All locale pages are pre-rendered at build time using `generateStaticParams()`

### 2. Translation System
- **Typed Translations**: TypeScript ensures type safety across all translations
- **Central Dictionary**: All content is in `src/i18n/locales/`
- **Component Props**: Each component receives `locale` prop and loads translations via `getDictionary(locale)`

### 3. Language Switcher
- Located in header (desktop and mobile)
- Maintains current path when switching languages
- URL-based (no localStorage) for better SEO

## Adding a New Language

### Step 1: Add locale to config
```typescript
// src/i18n/config.ts
export const locales = ['en', 'pl', 'de'] as const; // Add 'de'
export const localeNames: Record<Locale, string> = {
  en: 'English',
  pl: 'Polski',
  de: 'Deutsch', // Add German
};
```

### Step 2: Create translation file
```typescript
// src/i18n/locales/de.ts
import type { Translation } from './en';

export const de: Translation = {
  metadata: {
    title: 'BookSolo - Solo Social: Social Media Content...',
    description: '...',
  },
  // ... copy structure from en.ts and translate
};
```

### Step 3: Add to dictionary loader
```typescript
// src/i18n/get-dictionary.ts
import { de } from './locales/de';

const dictionaries = {
  en,
  pl,
  de, // Add German
};
```

### Step 4: Update fonts (if needed)
```typescript
// src/app/[locale]/layout.tsx
const manrope = Manrope({ 
  subsets: ['latin', 'latin-ext'] // Add subsets as needed
});
```

## Translation Keys Structure

```typescript
{
  metadata: { title, description },
  nav: { features, gallery, aiChat, pricing, testimonials },
  hero: { heading, subheading },
  benefits: {
    section1: { title, description, bullets: [{title, description}] },
    section2: { ... },
    section3: { ... }
  },
  gallery: { title, description, loading },
  pricing: { title, description, tiers: { starter, growth, scale } },
  newsletter: { title, description, emailPlaceholder, subscribeButton },
  footer: { description, quickLinks, contactUs, email, copyright, privacyPolicy, termsOfService },
  cookies: { message, accept, reject }
}
```

## SEO Considerations

### Metadata per Locale
Each locale page generates its own metadata:
```typescript
export async function generateMetadata({ params }: PageProps): Promise<Metadata> {
  const t = getDictionary(params.locale);
  return {
    title: t.metadata.title,
    description: t.metadata.description,
    alternates: {
      canonical: `https://booksolo.eu/${params.locale}`,
      languages: {
        'en': '/en',
        'pl': '/pl',
      },
    },
  };
}
```

### HTML Lang Attribute
Set automatically per locale:
```tsx
<html lang={params.locale}>
```

### Hreflang Tags
Automatically generated in metadata `alternates.languages`

## Component Pattern

All components that display text follow this pattern:

```typescript
import type { Locale } from '@/i18n/config';
import { getDictionary } from '@/i18n/get-dictionary';

interface ComponentProps {
  locale: Locale;
}

const Component: React.FC<ComponentProps> = ({ locale }) => {
  const t = getDictionary(locale);
  
  return (
    <div>
      <h1>{t.section.title}</h1>
      <p>{t.section.description}</p>
    </div>
  );
};
```

## Build & Deploy

### Static Export
The site is configured for static export to S3:

```bash
# Build generates static HTML for all locales
npm run build

# Output structure:
out/
├── en/
│   ├── index.html
│   └── polityka-prywatnosci/
│       └── index.html
└── pl/
    ├── index.html
    └── polityka-prywatnosci/
        └── index.html
```

### Deploy to S3
```bash
make deploy
# or
aws s3 sync out/ s3://booksolo-landing-page-{ACCOUNT_ID}/ --profile booksolo --delete
```

### CloudFront Setup (if using)
Configure CloudFront to handle:
- `/` → redirect to `/en/` (or use middleware)
- `/en/*` → serve from S3
- `/pl/*` → serve from S3

## Best Practices

1. **Type Safety**: Always import `Translation` type in new locale files
2. **Consistency**: Keep translation keys identical across all locales
3. **Component Props**: Pass `locale` down from page-level components
4. **URL Structure**: Use locale prefix in all links: `/${locale}/path`
5. **Date Formatting**: Use locale-aware date formatting:
   ```typescript
   new Date().toLocaleDateString(locale === 'pl' ? 'pl-PL' : 'en-US')
   ```

## Testing

### Local Development
```bash
npm run dev
```
- Visit `http://localhost:3000` (redirects to `/en`)
- Visit `http://localhost:3000/en` (English)
- Visit `http://localhost:3000/pl` (Polish)

### Verify Translations
1. Check all pages in both languages
2. Test language switcher on each page
3. Verify URL structure maintains on language switch
4. Check cookie consent banner translations
5. Test newsletter form in both languages

## Troubleshooting

### Issue: 404 on language routes
**Solution**: Ensure `generateStaticParams()` is defined in `[locale]/page.tsx`

### Issue: Missing translations
**Solution**: Check that all keys in `en.ts` exist in other locale files (TypeScript will error)

### Issue: Language switcher not working
**Solution**: Verify `LanguageSwitcher` is receiving correct `currentLocale` prop

### Issue: Root path not redirecting
**Solution**: Check `middleware.ts` configuration and matcher pattern

## Performance

- **Static Generation**: All pages pre-rendered at build time (fast)
- **No Client-Side Dictionary Loading**: Translations loaded server-side
- **Small Bundle Size**: Only active locale loaded per page
- **SEO Optimized**: Proper metadata and hreflang tags for each locale
